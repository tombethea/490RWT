{"version":3,"file":"src_pages_Post_EditPostPage_EditPostPage_js.iframe.bundle.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA;;;;AALA;AACA;AACA;AACA;AAEA;AAUA;AAWA;AAAA;AAAA;AAEA;AAAA;;AACA;AACA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAOA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAIA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClDA;;AASA;AACA;AACA;AACA;AACA;;AAEA;AAAA;;AACA;AAAA;;AACA;AACA;;AAEA;AACA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAQA;AACA;AACA;AAHA;AAQA;AACA;AACA;AACA;AACA;AAAA;AAAA;AALA;AAOA;AAAA;AAAA;AAGA;AACA;AACA;AAHA;AAQA;AACA;AACA;AACA;AACA;AAAA;AAAA;AALA;AAOA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAOA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxEA;;AAEA;AAAA;AACA;AAAA;AAAA;AACA;;AAEA","sources":["webpack://web/./src/components/Post/EditPostCell/EditPostCell.js","webpack://web/./src/components/Post/PostForm/PostForm.js","webpack://web/./src/pages/Post/EditPostPage/EditPostPage.js"],"sourcesContent":["import { useMutation } from '@redwoodjs/web'\nimport { toast } from '@redwoodjs/web/toast'\nimport { navigate, routes } from '@redwoodjs/router'\nimport PostForm from 'src/components/Post/PostForm'\n\nexport const QUERY = gql`\n  query FindPostById($id: Int!) {\n    post: post(id: $id) {\n      id\n      title\n      body\n      createdAt\n    }\n  }\n`\nconst UPDATE_POST_MUTATION = gql`\n  mutation UpdatePostMutation($id: Int!, $input: UpdatePostInput!) {\n    updatePost(id: $id, input: $input) {\n      id\n      title\n      body\n      createdAt\n    }\n  }\n`\n\nexport const Loading = () => <div>Loading...</div>\n\nexport const Success = ({ post }) => {\n  const [updatePost, { loading, error }] = useMutation(UPDATE_POST_MUTATION, {\n    onCompleted: () => {\n      toast.success('Post updated')\n      navigate(routes.posts())\n    },\n  })\n\n  const onSave = (input, id) => {\n    updatePost({ variables: { id, input } })\n  }\n\n  return (\n    <div className=\"rw-segment\">\n      <header className=\"rw-segment-header\">\n        <h2 className=\"rw-heading rw-heading-secondary\">Edit Post {post.id}</h2>\n      </header>\n      <div className=\"rw-segment-main\">\n        <PostForm post={post} onSave={onSave} error={error} loading={loading} />\n      </div>\n    </div>\n  )\n}\n","import {\n  Form,\n  FormError,\n  FieldError,\n  Label,\n  TextField,\n  Submit,\n} from '@redwoodjs/forms'\n\nconst formatDatetime = (value) => {\n  if (value) {\n    return value.replace(/:\\d{2}\\.\\d{3}\\w/, '')\n  }\n}\n\nconst PostForm = (props) => {\n  const onSubmit = (data) => {\n    props.onSave(data, props?.post?.id)\n  }\n\n  return (\n    <div className=\"rw-form-wrapper\">\n      <Form onSubmit={onSubmit} error={props.error}>\n        <FormError\n          error={props.error}\n          wrapperClassName=\"rw-form-error-wrapper\"\n          titleClassName=\"rw-form-error-title\"\n          listClassName=\"rw-form-error-list\"\n        />\n\n        <Label\n          name=\"title\"\n          className=\"rw-label\"\n          errorClassName=\"rw-label rw-label-error\"\n        >\n          Title\n        </Label>\n        <TextField\n          name=\"title\"\n          defaultValue={props.post?.title}\n          className=\"rw-input\"\n          errorClassName=\"rw-input rw-input-error\"\n          validation={{ required: true }}\n        />\n        <FieldError name=\"title\" className=\"rw-field-error\" />\n\n        <Label\n          name=\"body\"\n          className=\"rw-label\"\n          errorClassName=\"rw-label rw-label-error\"\n        >\n          Body\n        </Label>\n        <TextField\n          name=\"body\"\n          defaultValue={props.post?.body}\n          className=\"rw-input\"\n          errorClassName=\"rw-input rw-input-error\"\n          validation={{ required: true }}\n        />\n        <FieldError name=\"body\" className=\"rw-field-error\" />\n\n        <div className=\"rw-button-group\">\n          <Submit disabled={props.loading} className=\"rw-button rw-button-blue\">\n            Save\n          </Submit>\n        </div>\n      </Form>\n    </div>\n  )\n}\n\nexport default PostForm\n","import EditPostCell from 'src/components/Post/EditPostCell'\n\nconst EditPostPage = ({ id }) => {\n  return <EditPostCell id={id} />\n}\n\nexport default EditPostPage\n"],"names":[],"sourceRoot":""}